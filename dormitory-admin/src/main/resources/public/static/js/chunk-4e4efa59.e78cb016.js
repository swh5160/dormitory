(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e4efa59"],{"0bb4":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l}));var c=n("b775"),a=n("751a"),o="/api/notice";function r(t){return Object(c["a"])({url:"".concat(o,"/get/page"),method:a["a"].GET,params:t})}function i(t){return Object(c["a"])({url:"".concat(o),method:a["a"].POST,data:t})}function u(t){return Object(c["a"])({url:"".concat(o,"/").concat(t),method:a["a"].DELETE})}function l(t){return Object(c["a"])({url:"".concat(o,"/get/recent/").concat(t),method:a["a"].GET})}},"49e5":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"i",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return s})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return b})),n.d(e,"b",(function(){return p})),n.d(e,"k",(function(){return m})),n.d(e,"j",(function(){return h}));var c=n("b775"),a=n("751a"),o="/api/student";function r(t){return Object(c["a"])({url:"".concat(o,"/get/page"),method:a["a"].GET,params:t})}function i(t){return Object(c["a"])({url:"".concat(o),method:a["a"].POST,data:t})}function u(t){return Object(c["a"])({url:"".concat(o,"/").concat(t),method:a["a"].DELETE})}function l(t){return Object(c["a"])({url:"".concat(o,"/").concat(t),method:a["a"].GET})}function s(){return Object(c["a"])({url:"".concat(o,"/self/info"),method:a["a"].GET})}function d(t){return Object(c["a"])({url:"".concat(o,"/apply/bed"),method:a["a"].POST,data:t})}function f(){return Object(c["a"])({url:"".concat(o,"/clock/in"),method:a["a"].POST})}function b(){return Object(c["a"])({url:"".concat(o,"/get/clock/info"),method:a["a"].GET})}function p(){return Object(c["a"])({url:"".concat(o,"/check/clock"),method:a["a"].GET})}function m(t){return Object(c["a"])({url:"".concat(o,"/update/self"),method:a["a"].PUT,data:t})}function h(t){return Object(c["a"])({url:"".concat(o,"/update/password"),method:a["a"].PUT,data:t})}},"7f25":function(t,e,n){},9406:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n(t.currentRole,{tag:"component"})],1)},a=[],o=n("5530"),r=n("2f62"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-editor-container"},[n("el-row",[n("el-card",[n("avue-data-tabs",{attrs:{option:t.option}})],1)],1),n("el-row",{staticStyle:{display:"flex"},attrs:{gutter:2}},[n("el-col",[n("el-card",{staticStyle:{height:"760px"}},[n("span",{staticStyle:{"font-size":"22px",display:"block","margin-bottom":"30px","margin-left":"10px"}},[t._v("公告信息")]),n("el-timeline",t._l(t.activities,(function(e,c){return n("el-timeline-item",{key:c,attrs:{timestamp:e.gmtCreate}},[n("el-popover",{attrs:{placement:"right",title:e.title,width:"400",trigger:"hover"}},[n("div",{domProps:{innerHTML:t._s(e.content)}}),n("span",{staticStyle:{"font-size":"15px"},attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.title))])])],1)})),1)],1)],1),t.roles.includes("STUDENT")?n("el-col",[n("el-card",{staticStyle:{height:"760px"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("span",{staticStyle:{"font-size":"22px",display:"block","margin-bottom":"30px","margin-left":"10px"}},[t._v("打卡")]),t.isClocked?n("span",[n("el-button",{staticClass:"el-icon-s-promotion",staticStyle:{border:"none"},attrs:{type:"success"}},[n("span",{staticStyle:{color:"white","font-weight":"bolder"}},[t._v("已打卡")])])],1):n("span",[n("el-button",{staticClass:"el-icon-s-promotion",staticStyle:{border:"none"},attrs:{type:"primary"},on:{click:function(e){return t.clockIn()}}},[n("span",{staticStyle:{color:"white","font-weight":"bolder"}},[t._v("未打卡")])])],1)]),n("el-calendar",{attrs:{"first-day-of-week":7},scopedSlots:t._u([{key:"dateCell",fn:function(e){var c=e.data;return[n("p",[t._v(t._s(c.day.split("-").slice(2).join("-"))),n("br")]),t._l(t.calendarData,(function(e,a){return n("div",{key:a},[c.day===e.day?n("div",[e.clock?n("span",[n("i",{staticClass:"el-icon-check",staticStyle:{color:"green","font-weight":"bolder"}},[t._v("已打卡")])]):t._e()]):t._e()])}))]}}],null,!1,4053835612)})],1)],1):t._e()],1),n("el-row",[n("el-card",[n("span",{staticStyle:{"font-size":"22px",display:"block","margin-bottom":"30px","margin-left":"10px"}},[t._v("问题汇总")]),n("el-timeline",t._l(t.recentProblems,(function(e){return n("el-timeline-item",{attrs:{timestamp:e.gmtCreate,placement:"top"}},[n("el-card",[n("h4",[t._v(" "+t._s(e.title)+" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "+t._s(e.bno)+" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "+t._s(e.rno)+" "),n("el-divider",{attrs:{direction:"vertical"}}),t._v(" "+t._s(e.studentName)+" "),n("el-divider",{attrs:{direction:"vertical"}})],1),n("p",{domProps:{innerHTML:t._s(e.content)}})])],1)})),1)],1)],1)],1)},u=[],l=n("0bb4"),s=n("49e5"),d=n("b775"),f=n("751a"),b="/api/statistical";function p(){return Object(d["a"])({url:"".concat(b,"/get"),method:f["a"].GET})}var m=n("9d9a"),h={name:"DashboardAdmin",computed:Object(o["a"])({},Object(r["b"])(["roles"])),data:function(){return{activities:[],calendarData:[],isClocked:!1,option:{data:[]},recentProblems:[]}},created:function(){this.getRecent(),this.getClockInfo(),this.checkClockIn(),this.getStatistical(),this.getRecentProblems()},methods:{getRecentProblems:function(){var t=this;Object(m["e"])(10).then((function(e){t.recentProblems=e.data}))},getStatistical:function(){var t=this;p().then((function(e){var n,c=e.data,a=c.studentClockInfo,o=c.studentAccommodationInfo,r=c.buildingRoomInfo,i=[{title:"打卡统计",subtitle:"实时",count:a.clockCount,allcount:a.allCount,text:"当前分类总记录数",color:"rgb(27, 201, 142)",key:"类"},{title:"学生住宿统计",subtitle:"实时",count:o.accommodationCount,allcount:o.allCount,text:"当前分类总记录数",color:"rgb(230, 71, 88)",key:"类"},{title:"空宿舍统计",subtitle:"实时",count:r.emptyCount,allcount:r.allCount,text:"当前分类总记录数",color:"rgb(178, 159, 255)",key:"类"}];t.option.data=[],(n=t.option.data).push.apply(n,i)}))},checkClockIn:function(){var t=this;Object(s["b"])().then((function(e){t.isClocked=e.data}))},clockIn:function(){var t=this;Object(s["c"])().then((function(e){t.getClockInfo(),t.checkClockIn(),t.getStatistical(),t.msgNoticeSuccess("打卡成功")}))},getClockInfo:function(){var t=this;Object(s["e"])().then((function(e){t.calendarData=e.data.clockInfo}))},getRecent:function(){var t=this;Object(l["c"])(10).then((function(e){t.activities=e.data}))}}},g=h,v=(n("a667"),n("2877")),k=Object(v["a"])(g,i,u,!1,null,"c08ca968",null),O=k.exports,j={name:"Dashboard",components:{adminDashboard:O},data:function(){return{currentRole:"adminDashboard"}},computed:Object(o["a"])({},Object(r["b"])(["roles"])),created:function(){}},y=j,_=Object(v["a"])(y,c,a,!1,null,null,null);e["default"]=_.exports},"9d9a":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return d}));var c=n("b775"),a=n("751a"),o="/api/problem";function r(t){return Object(c["a"])({url:"".concat(o,"/get/page"),method:a["a"].GET,params:t})}function i(t){return Object(c["a"])({url:"".concat(o),method:a["a"].POST,data:t})}function u(t){return Object(c["a"])({url:"".concat(o,"/").concat(t),method:a["a"].DELETE})}function l(t){return Object(c["a"])({url:"".concat(o,"/audit"),method:a["a"].PUT,data:t})}function s(t){return Object(c["a"])({url:"".concat(o,"/get/my/page"),method:a["a"].GET,params:t})}function d(t){return Object(c["a"])({url:"".concat(o,"/get/recent/").concat(t),method:a["a"].GET})}},a667:function(t,e,n){"use strict";n("7f25")}}]);